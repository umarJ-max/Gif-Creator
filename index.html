<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Umar J - GIF Creator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 40px;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .brand {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #64748b;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .upload-section {
            margin-bottom: 30px;
        }

        .upload-area {
            border: 3px dashed #cbd5e1;
            border-radius: 16px;
            padding: 60px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            position: relative;
            overflow: hidden;
        }

        .upload-area:hover {
            border-color: #667eea;
            background: linear-gradient(135deg, #f0f4ff, #e0e7ff);
            transform: translateY(-2px);
        }

        .upload-area.dragover {
            border-color: #667eea;
            background: linear-gradient(135deg, #e0e7ff, #c7d2fe);
        }

        .upload-icon {
            font-size: 4rem;
            color: #94a3b8;
            margin-bottom: 20px;
            transition: color 0.3s ease;
        }

        .upload-area:hover .upload-icon {
            color: #667eea;
        }

        .upload-text {
            font-size: 1.2rem;
            color: #475569;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .upload-hint {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .file-input {
            display: none;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .control-group {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e2e8f0;
        }

        .control-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #334155;
            font-size: 0.9rem;
        }

        .control-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            background: white;
        }

        .control-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .preview-section {
            margin-bottom: 30px;
            text-align: center;
        }

        .preview-area {
            background: #f8fafc;
            border-radius: 16px;
            padding: 40px;
            border: 2px solid #e2e8f0;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .preview-canvas {
            max-width: 100%;
            max-height: 400px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .preview-placeholder {
            color: #94a3b8;
            font-size: 1.1rem;
        }

        .actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        .btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover:before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: translateY(0);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(245, 158, 11, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
            margin: 20px 0;
            display: none;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }

        .status-message {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            display: none;
        }

        .status-success {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #bbf7d0;
        }

        .status-error {
            background: #fef2f2;
            color: #dc2626;
            border: 1px solid #fecaca;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e2e8f0;
        }

        .footer-brand {
            font-size: 1.2rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 10px;
        }

        .footer-text {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 30px 20px;
                margin: 10px;
            }

            .brand {
                font-size: 2rem;
            }

            .controls {
                grid-template-columns: 1fr;
            }

            .actions {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 300px;
            }
        }

        /* Loading animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="brand">Umar J</h1>
            <p class="subtitle">Professional GIF Creator</p>
        </div>

        <div class="upload-section">
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">🎬</div>
                <div class="upload-text">Drop your images here or click to browse</div>
                <div class="upload-hint">Supports JPG, PNG, WebP • Multiple files allowed</div>
                <input type="file" id="fileInput" class="file-input" multiple accept="image/*">
            </div>
        </div>

        <div class="controls">
            <div class="control-group">
                <label class="control-label" for="delayInput">Frame Delay (ms)</label>
                <input type="number" id="delayInput" class="control-input" value="500" min="50" max="5000">
            </div>
            
            <div class="control-group">
                <label class="control-label" for="qualityInput">Quality</label>
                <select id="qualityInput" class="control-input">
                    <option value="1">High Quality</option>
                    <option value="10" selected>Medium Quality</option>
                    <option value="20">Low Quality (Smaller Size)</option>
                </select>
            </div>

            <div class="control-group">
                <label class="control-label" for="sizeInput">Max Size (px)</label>
                <select id="sizeInput" class="control-input">
                    <option value="800">800px</option>
                    <option value="600" selected>600px</option>
                    <option value="400">400px</option>
                    <option value="200">200px (Tiny)</option>
                </select>
            </div>

            <div class="control-group">
                <label class="control-label" for="loopInput">Loop Count</label>
                <select id="loopInput" class="control-input">
                    <option value="0" selected>Infinite</option>
                    <option value="1">Once</option>
                    <option value="3">3 times</option>
                    <option value="5">5 times</option>
                </select>
            </div>
        </div>

        <div class="progress-bar" id="progressBar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="status-message" id="statusMessage"></div>

        <div class="preview-section">
            <div class="preview-area" id="previewArea">
                <div class="preview-placeholder">Your GIF will appear here</div>
            </div>
        </div>

        <div class="actions">
            <button class="btn btn-primary" id="createBtn" disabled>
                <span>🎨 Create GIF</span>
            </button>
            <button class="btn btn-secondary" id="downloadBtn" style="display: none;">
                <span>⬇️ Download GIF</span>
            </button>
            <button class="btn btn-success" id="shareBtn" style="display: none;">
                <span>🔗 Share GIF</span>
            </button>
        </div>

        <div class="footer">
            <div class="footer-brand">Umar J</div>
            <div class="footer-text">Create amazing GIFs with professional quality</div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.min.js"></script>
    <script>
        class GIFCreator {
            constructor() {
                this.images = [];
                this.gifBlob = null;
                this.initializeElements();
                this.attachEventListeners();
            }

            initializeElements() {
                this.uploadArea = document.getElementById('uploadArea');
                this.fileInput = document.getElementById('fileInput');
                this.delayInput = document.getElementById('delayInput');
                this.qualityInput = document.getElementById('qualityInput');
                this.sizeInput = document.getElementById('sizeInput');
                this.loopInput = document.getElementById('loopInput');
                this.createBtn = document.getElementById('createBtn');
                this.downloadBtn = document.getElementById('downloadBtn');
                this.shareBtn = document.getElementById('shareBtn');
                this.previewArea = document.getElementById('previewArea');
                this.progressBar = document.getElementById('progressBar');
                this.progressFill = document.getElementById('progressFill');
                this.statusMessage = document.getElementById('statusMessage');
            }

            attachEventListeners() {
                // Upload area events
                this.uploadArea.addEventListener('click', () => this.fileInput.click());
                this.uploadArea.addEventListener('dragover', this.handleDragOver.bind(this));
                this.uploadArea.addEventListener('dragleave', this.handleDragLeave.bind(this));
                this.uploadArea.addEventListener('drop', this.handleDrop.bind(this));
                
                // File input
                this.fileInput.addEventListener('change', this.handleFileSelect.bind(this));
                
                // Buttons
                this.createBtn.addEventListener('click', this.createGIF.bind(this));
                this.downloadBtn.addEventListener('click', this.downloadGIF.bind(this));
                this.shareBtn.addEventListener('click', this.shareGIF.bind(this));
            }

            handleDragOver(e) {
                e.preventDefault();
                this.uploadArea.classList.add('dragover');
            }

            handleDragLeave(e) {
                e.preventDefault();
                this.uploadArea.classList.remove('dragover');
            }

            handleDrop(e) {
                e.preventDefault();
                this.uploadArea.classList.remove('dragover');
                const files = Array.from(e.dataTransfer.files);
                this.processFiles(files);
            }

            handleFileSelect(e) {
                const files = Array.from(e.target.files);
                this.processFiles(files);
            }

            async processFiles(files) {
                this.images = [];
                this.hideStatus();
                
                const imageFiles = files.filter(file => file.type.startsWith('image/'));
                
                if (imageFiles.length === 0) {
                    this.showStatus('Please select valid image files', 'error');
                    return;
                }

                this.showStatus(`Loading ${imageFiles.length} images...`, 'success');

                for (const file of imageFiles) {
                    try {
                        const image = await this.loadImage(file);
                        this.images.push(image);
                    } catch (error) {
                        console.error('Error loading image:', error);
                    }
                }

                if (this.images.length > 0) {
                    this.createBtn.disabled = false;
                    this.showStatus(`${this.images.length} images loaded successfully!`, 'success');
                    this.updateUploadArea();
                } else {
                    this.showStatus('Failed to load images. Please try again.', 'error');
                }
            }

            loadImage(file) {
                return new Promise((resolve, reject) => {
                    const img = new Image();
                    img.onload = () => resolve(img);
                    img.onerror = reject;
                    img.src = URL.createObjectURL(file);
                });
            }

            updateUploadArea() {
                this.uploadArea.innerHTML = `
                    <div class="upload-icon">✅</div>
                    <div class="upload-text">${this.images.length} images ready</div>
                    <div class="upload-hint">Click to add more images</div>
                `;
            }

            async createGIF() {
                if (this.images.length === 0) return;

                this.createBtn.disabled = true;
                this.createBtn.innerHTML = '<div class="loading"></div> Creating GIF...';
                this.progressBar.style.display = 'block';
                this.hideStatus();

                try {
                    const delay = parseInt(this.delayInput.value);
                    const quality = parseInt(this.qualityInput.value);
                    const maxSize = parseInt(this.sizeInput.value);
                    const repeat = parseInt(this.loopInput.value);

                    const gif = new GIF({
                        workers: 2,
                        quality: quality,
                        width: maxSize,
                        height: maxSize,
                        workerScript: 'https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.worker.js'
                    });

                    gif.on('progress', (p) => {
                        this.progressFill.style.width = (p * 100) + '%';
                    });

                    gif.on('finished', (blob) => {
                        this.gifBlob = blob;
                        this.displayGIF(blob);
                        this.createBtn.disabled = false;
                        this.createBtn.innerHTML = '<span>🎨 Create GIF</span>';
                        this.progressBar.style.display = 'none';
                        this.downloadBtn.style.display = 'inline-flex';
                        this.shareBtn.style.display = 'inline-flex';
                        this.showStatus('GIF created successfully!', 'success');
                    });

                    // Add frames to gif
                    this.images.forEach(img => {
                        const canvas = this.resizeImage(img, maxSize);
                        gif.addFrame(canvas, { delay: delay });
                    });

                    gif.render();

                } catch (error) {
                    console.error('Error creating GIF:', error);
                    this.showStatus('Error creating GIF. Please try again.', 'error');
                    this.createBtn.disabled = false;
                    this.createBtn.innerHTML = '<span>🎨 Create GIF</span>';
                    this.progressBar.style.display = 'none';
                }
            }

            resizeImage(img, maxSize) {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');

                // Calculate new dimensions maintaining aspect ratio
                let { width, height } = img;
                if (width > height) {
                    if (width > maxSize) {
                        height = (height * maxSize) / width;
                        width = maxSize;
                    }
                } else {
                    if (height > maxSize) {
                        width = (width * maxSize) / height;
                        height = maxSize;
                    }
                }

                canvas.width = width;
                canvas.height = height;
                ctx.drawImage(img, 0, 0, width, height);

                return canvas;
            }

            displayGIF(blob) {
                const url = URL.createObjectURL(blob);
                this.previewArea.innerHTML = `
                    <img src="${url}" alt="Generated GIF" class="preview-canvas">
                `;
            }

            downloadGIF() {
                if (!this.gifBlob) return;

                const url = URL.createObjectURL(this.gifBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `umarj-gif-${Date.now()}.gif`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                this.showStatus('GIF downloaded successfully!', 'success');
            }

            async shareGIF() {
                if (!this.gifBlob) return;

                if (navigator.share && navigator.canShare) {
                    try {
                        const file = new File([this.gifBlob], 'umarj-gif.gif', { type: 'image/gif' });
                        await navigator.share({
                            title: 'Created with Umar J GIF Creator',
                            text: 'Check out this awesome GIF I created!',
                            files: [file]
                        });
                        this.showStatus('GIF shared successfully!', 'success');
                    } catch (error) {
                        this.fallbackShare();
                    }
                } else {
                    this.fallbackShare();
                }
            }

            fallbackShare() {
                const url = URL.createObjectURL(this.gifBlob);
                const text = 'Created with Umar J GIF Creator - ' + url;
                
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(text).then(() => {
                        this.showStatus('GIF link copied to clipboard!', 'success');
                    });
                } else {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = text;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    this.showStatus('GIF link copied to clipboard!', 'success');
                }
            }

            showStatus(message, type) {
                this.statusMessage.textContent = message;
                this.statusMessage.className = `status-message status-${type}`;
                this.statusMessage.style.display = 'block';

                if (type === 'success') {
                    setTimeout(() => this.hideStatus(), 3000);
                }
            }

            hideStatus() {
                this.statusMessage.style.display = 'none';
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            new GIFCreator();
        });

        // Add some nice scroll animations
        window.addEventListener('scroll', () => {
            const elements = document.querySelectorAll('.control-group, .btn');
            elements.forEach(el => {
                const rect = el.getBoundingClientRect();
                if (rect.top < window.innerHeight && rect.bottom > 0) {
                    el.style.transform = 'translateY(0)';
                    el.style.opacity = '1';
                }
            });
        });
    </script>
</body>
</html>
